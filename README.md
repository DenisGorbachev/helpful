<!-- DO NOT EDIT -->
<!-- This file is automatically generated by README.ts. -->
<!-- Edit README.ts if you want to make changes. -->

# A better anyhow::Error with a more descriptive error message

[![Build](https://github.com/DenisGorbachev/yes-but-why/actions/workflows/ci.yml/badge.svg)](https://github.com/DenisGorbachev/yes-but-why)
[![Documentation](https://docs.rs/helpful/badge.svg)](https://docs.rs/helpful)

The [`helpful::Error`][__link0] is an upgraded version of [`anyhow::Error`][__link1].
It provides additional information from the current span trace.
This information can be used to diagnose the root cause of the error, which simplifies debugging & provides helpful error messages to the users.

Features:

* [x] Can be propagated up the call stack, just like [`anyhow::Error`][__link2]
* [x] Can be constructed from external error types, just like [`anyhow::Error`][__link3]
* [x] Captures the current tracing span, just like [`tracing_error::TracedError<E>`][__link4]

Benefits:

* Provides a detailed span trace to the user (which makes it easier to diagnose the root cause of the error)
* Provides a detailed span trace to the developer (which simplifies debugging)

Advantages over [`anyhow::Error`][__link5]:

* Provides additional information from the current span trace

Advantages over [`tracing_error::TracedError<E>`][__link6]:

* Can be propagated up the call stack with `?` operator (no explicit conversion needed). This is because [`Error`][__link7] doesn’t have any generic arguments, so you can call any function that returns a `Result<T, TracingError>` and apply a `?` operator to the result. By contrast, [`tracing_error::TracedError<E>`][__link8] is generic over `E`, so you can’t compose the functions that return different `Result<T, TracedError<E>>`.

## Setup

* Initialize the tracing subscriber in `main`
* Ensure the default level is set to `Level::INFO` (or modify your `instrument` attributes to collect the data at another level)

## **Important setup note**

If you don’t see any tracing spans in the error message, check your tracing subscriber configuration. Here’s an example of a correct configuration:

```rust
fn main() {
    init_tracing_subscriber();
    // your code here
}

fn init_tracing_subscriber() {
   use tracing_subscriber::util::SubscriberInitExt;
   use tracing::level_filters::LevelFilter;
   use tracing_error::ErrorLayer;
   use tracing_subscriber::layer::SubscriberExt;
   let env_filter = tracing_subscriber::EnvFilter::builder().with_default_directive(LevelFilter::INFO.into()).from_env_lossy();
   let subscriber = tracing_subscriber::fmt()
       .with_env_filter(env_filter)
       // .with_max_level(tracing::Level::TRACE) // Set the maximum log level to TRACE
       .finish()
       .with(ErrorLayer::default());
   // dbg!(&subscriber);
   subscriber.init();
}
```

   [__cargo_doc2readme_dependencies_info]: ggGkYW0BYXSEGyMws-dKI-LpG9swkVXG-rikGwSuJGhB0NVbG974QPrPJF6XYXKEG6FTjo0E-tkgG7fx1k5IKOmcGzeZA4ySLmNwG3S2fhirjvsvYWSBgmdoZWxwZnVsZTAuMS4w
 [__link0]: https://docs.rs/helpful/latest/helpful/struct.Error.html
 [__link1]: https://docs.rs/anyhow/latest/anyhow/struct.Error.html
 [__link2]: https://docs.rs/anyhow/latest/anyhow/struct.Error.html
 [__link3]: https://docs.rs/anyhow/latest/anyhow/struct.Error.html
 [__link4]: https://docs.rs/tracing-error/latest/tracing_error/struct.TracedError.html
 [__link5]: https://docs.rs/anyhow/latest/anyhow/struct.Error.html
 [__link6]: https://docs.rs/tracing-error/latest/tracing_error/struct.TracedError.html
 [__link7]: https://docs.rs/helpful/latest/helpful/struct.Error.html
 [__link8]: https://docs.rs/tracing-error/latest/tracing_error/struct.TracedError.html


## Installation

```shell
cargo add helpful tracing_error
```

**Important:** add the `tracing_error` crate too.

## Gratitude

Like the project? [Say thanks!](https://github.com/DenisGorbachev/yes-but-why/discussions/new?category=gratitude) ❤️

## License

[Apache License 2.0](LICENSE-APACHE) or [MIT License](LICENSE-MIT) at your option.

Unless you explicitly state otherwise, any contribution intentionally submitted for inclusion in this crate by you, as defined in the Apache-2.0 license, shall be dual licensed as above, without any additional terms or conditions.
